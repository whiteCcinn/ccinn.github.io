---
title: 【正则表达式】- 贪婪和非贪婪模式
date: 2018-03-12 14:11:56
categories: [正则]
tags: [正则]
---

## 模式：

在使用修饰匹配次数的特殊符号时，有几种表示方法可以使同一个表达式能够匹配不同的次数，比如："{m,n}", "{m,}", "?", "*", "+"，具体匹配的次数随被匹配的字符串而定。这种重复匹配不定次数的表达式在匹配过程中，总是尽可能多的匹配。比如，针对文本 "dxxxdxxxd"，举例如下：

## 贪婪模式：

| 表达式      | 匹配结果                                                         |
| ----------- | ---------------------------------------------------------------- |
| (d)(\w+)    | "\w+" 将匹配第一个 "d" 之后的所有字符 "xxxdxxxd"                 |
| (d)(\w+)(d) | "\w+" 将匹配第一个 "d" 和最后一个 "d" 之间的所有字符 "xxxdxxx"。 |

虽然 "\w+" 也能够匹配上最后一个 "d"，但是为了使整个表达式匹配成功，
"\w+" 可以 "让出" 它本来能够匹配的最后一个 "d"
<!-- more -->

由此可见，"\w+" 在匹配的时候，总是尽可能多的匹配符合它规则的字符。
虽然第二个举例中，它没有匹配最后一个 "d"，但那也是为了让整个表达式能够匹配成功。
同理，带 "*" 和 "{m,n}" 的表达式都是尽可能地多匹配，带 "?" 的表达式在可匹配可不匹配的时候，
也是尽可能的 "要匹配"。这 种匹配原则就叫作 "贪婪" 模式 。

## 非贪婪模式：

在修饰匹配次数的特殊符号后再加上一个 "?" 号，则可以使匹配次数不定的表达式尽可能少的匹配，使可匹配可不匹配的表达式，尽可能的 "不匹配"。这种匹配原则叫作 "非贪婪" 模式，也叫作 "勉强" 模式。如果少匹配就会导致整个表达式匹配失败的时候，与贪婪模式类似，非贪婪模式会最小限度的再匹配一些，以使整个表达式匹配成功。举例如下，针对文本 "dxxxdxxxd" 举例：

| 表达式       | 匹配结果                                                                                                                             |
| ------------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| (d)(\w+?)    | "\w+?" 将尽可能少的匹配第一个 "d" 之后的字符，结果是："\w+?" 只匹配了一个 "x"                                                        |
| (d)(\w+?)(d) | 为了让整个表达式匹配成功，"\w+?" 不得不匹配 "xxx" 才可以让后边的 "d" 匹配，从而使整个表达式匹配成功。因此，结果是："\w+?" 匹配 "xxx" |